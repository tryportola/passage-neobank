{"version":3,"sources":["../package.json","../src/config.ts","../src/errors.ts","../src/resources/base.ts","../src/resources/applications.ts","../src/resources/offers.ts","../src/resources/loans.ts","../src/resources/lenders.ts","../src/resources/account.ts","../src/resources/signing.ts","../src/resources/sdx.ts","../src/resources/wallets.ts","../src/client.ts"],"names":["axios","Configuration","ApplicationsApi","OffersApi","LoansApi","EntityDiscoveryApi","NeobankSelfServiceApi","SigningApi","SDXApi","WalletsApi"],"mappings":"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","file":"index.js","sourcesContent":["{\n  \"name\": \"@portola/passage-neobank\",\n  \"version\": \"1.4.0\",\n  \"description\": \"Official Passage SDK for Neobank integrations\",\n  \"main\": \"./dist/index.js\",\n  \"module\": \"./dist/index.mjs\",\n  \"types\": \"./dist/index.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"import\": \"./dist/index.mjs\",\n      \"require\": \"./dist/index.js\"\n    },\n    \"./types\": {\n      \"types\": \"./dist/types/index.d.ts\",\n      \"import\": \"./dist/types/index.mjs\",\n      \"require\": \"./dist/types/index.js\"\n    },\n    \"./crypto\": {\n      \"types\": \"./dist/crypto/index.d.ts\",\n      \"import\": \"./dist/crypto/index.mjs\",\n      \"require\": \"./dist/crypto/index.js\"\n    },\n    \"./webhooks\": {\n      \"types\": \"./dist/webhooks/index.d.ts\",\n      \"import\": \"./dist/webhooks/index.mjs\",\n      \"require\": \"./dist/webhooks/index.js\"\n    }\n  },\n  \"files\": [\n    \"dist\",\n    \"README.md\",\n    \"LICENSE\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"dev\": \"tsup --watch\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"lint\": \"eslint src/\",\n    \"test\": \"vitest run\",\n    \"test:watch\": \"vitest\",\n    \"clean\": \"rm -rf dist\",\n    \"prepublishOnly\": \"npm run clean && npm run build\"\n  },\n  \"keywords\": [\n    \"passage\",\n    \"portola\",\n    \"loan\",\n    \"lending\",\n    \"fintech\",\n    \"api\",\n    \"sdk\",\n    \"typescript\",\n    \"neobank\"\n  ],\n  \"author\": \"Portola <hello@tryportola.com>\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"axios\": \"^1.6.0\"\n  },\n  \"peerDependencies\": {\n    \"@portola/passage\": \"^1.0.0\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.0.0\",\n    \"esbuild\": \"^0.20.0\",\n    \"tsup\": \"^8.0.0\",\n    \"typescript\": \"^5.3.0\",\n    \"vitest\": \"^1.0.0\"\n  },\n  \"engines\": {\n    \"node\": \">=18.0.0\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/tryportola/passage-sdk.git\",\n    \"directory\": \"packages/passage-neobank\"\n  },\n  \"homepage\": \"https://docs.tryportola.com\",\n  \"bugs\": {\n    \"url\": \"https://github.com/tryportola/passage-sdk/issues\"\n  }\n}\n","/**\n * Configuration for the Passage SDK client\n */\nexport interface PassageClientConfig {\n  /**\n   * Your neobank API key (starts with nb_test_ or nb_live_)\n   */\n  apiKey: string;\n\n  /**\n   * Environment to connect to\n   * @default 'production'\n   */\n  environment?: 'sandbox' | 'production';\n\n  /**\n   * Custom base URL (overrides environment setting)\n   * Only use this for testing or special configurations\n   */\n  baseUrl?: string;\n\n  /**\n   * Request timeout in milliseconds\n   * @default 30000\n   */\n  timeout?: number;\n\n  /**\n   * Maximum number of retries for failed requests\n   * @default 3\n   */\n  maxRetries?: number;\n\n  /**\n   * Enable debug logging\n   * @default false\n   */\n  debug?: boolean;\n}\n\n/**\n * Internal resolved configuration with all defaults applied\n */\nexport interface ResolvedConfig\n  extends Required<Omit<PassageClientConfig, 'baseUrl'>> {\n  baseUrl: string;\n}\n\n/**\n * Base API URL\n *\n * Note: The Passage API uses a single URL for both sandbox and production.\n * Environment routing is determined by the API key prefix:\n * - nb_test_* keys route to sandbox\n * - nb_live_* keys route to production\n *\n * The `environment` config option is primarily for documentation/clarity\n * and to auto-detect which key type is expected.\n */\nconst API_BASE_URL = 'https://api.tryportola.com/api/v1';\n\n/**\n * Resolve the base URL from configuration\n */\nexport function resolveBaseUrl(config: PassageClientConfig): string {\n  if (config.baseUrl) {\n    return config.baseUrl;\n  }\n  return API_BASE_URL;\n}\n\n/**\n * Resolve configuration with defaults\n */\nexport function resolveConfig(config: PassageClientConfig): ResolvedConfig {\n  return {\n    apiKey: config.apiKey,\n    environment: config.environment ?? 'production',\n    baseUrl: resolveBaseUrl(config),\n    timeout: config.timeout ?? 30000,\n    maxRetries: config.maxRetries ?? 3,\n    debug: config.debug ?? false,\n  };\n}\n","/**\n * Base error class for all Passage SDK errors\n */\nexport class PassageError extends Error {\n  /** HTTP status code (if applicable) */\n  readonly statusCode?: number;\n  /** API error code (e.g., 'NOT_FOUND', 'VALIDATION_ERROR') */\n  readonly errorCode?: string;\n  /** Request ID for support debugging */\n  readonly requestId?: string;\n  /** Original error details from API */\n  readonly details?: unknown;\n  /** Original cause error */\n  readonly cause?: Error;\n\n  constructor(\n    message: string,\n    options?: {\n      statusCode?: number;\n      errorCode?: string;\n      requestId?: string;\n      details?: unknown;\n      cause?: Error;\n    }\n  ) {\n    super(message);\n    this.name = 'PassageError';\n    this.statusCode = options?.statusCode;\n    this.errorCode = options?.errorCode;\n    this.requestId = options?.requestId;\n    this.details = options?.details;\n    this.cause = options?.cause;\n\n    // Maintain proper stack trace in V8 environments\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n\n  /**\n   * Check if this is a specific error type\n   */\n  is(errorCode: string): boolean {\n    return this.errorCode === errorCode;\n  }\n\n  /**\n   * Check if error is retryable (5xx or network errors)\n   */\n  get isRetryable(): boolean {\n    if (!this.statusCode) return true; // Network errors are retryable\n    return this.statusCode >= 500 || this.statusCode === 429;\n  }\n\n  /**\n   * Check if error is a client error (4xx)\n   */\n  get isClientError(): boolean {\n    return (\n      this.statusCode !== undefined &&\n      this.statusCode >= 400 &&\n      this.statusCode < 500\n    );\n  }\n\n  /**\n   * Check if error is a server error (5xx)\n   */\n  get isServerError(): boolean {\n    return this.statusCode !== undefined && this.statusCode >= 500;\n  }\n}\n\n/**\n * Validation error with field-level details\n */\nexport class ValidationError extends PassageError {\n  /** Field-specific validation errors */\n  readonly fields?: Record<string, string[]>;\n\n  constructor(\n    message: string,\n    fields?: Record<string, string[]>,\n    options?: {\n      requestId?: string;\n      details?: unknown;\n    }\n  ) {\n    super(message, {\n      statusCode: 400,\n      errorCode: 'VALIDATION_ERROR',\n      requestId: options?.requestId,\n      details: options?.details,\n    });\n    this.name = 'ValidationError';\n    this.fields = fields;\n  }\n\n  /**\n   * Get errors for a specific field\n   */\n  getFieldErrors(field: string): string[] {\n    return this.fields?.[field] ?? [];\n  }\n\n  /**\n   * Check if a specific field has errors\n   */\n  hasFieldError(field: string): boolean {\n    return (this.fields?.[field]?.length ?? 0) > 0;\n  }\n}\n\n/**\n * Authentication error (invalid or expired API key)\n */\nexport class AuthenticationError extends PassageError {\n  constructor(\n    message: string = 'Invalid or expired API key',\n    requestId?: string\n  ) {\n    super(message, {\n      statusCode: 401,\n      errorCode: 'AUTHENTICATION_ERROR',\n      requestId,\n    });\n    this.name = 'AuthenticationError';\n  }\n}\n\n/**\n * Authorization error (insufficient permissions)\n */\nexport class AuthorizationError extends PassageError {\n  constructor(\n    message: string = 'Insufficient permissions for this action',\n    requestId?: string\n  ) {\n    super(message, {\n      statusCode: 403,\n      errorCode: 'AUTHORIZATION_ERROR',\n      requestId,\n    });\n    this.name = 'AuthorizationError';\n  }\n}\n\n/**\n * Resource not found error\n */\nexport class NotFoundError extends PassageError {\n  /** The type of resource that wasn't found */\n  readonly resourceType?: string;\n  /** The ID that was looked up */\n  readonly resourceId?: string;\n\n  constructor(\n    message: string,\n    options?: {\n      resourceType?: string;\n      resourceId?: string;\n      requestId?: string;\n    }\n  ) {\n    super(message, {\n      statusCode: 404,\n      errorCode: 'NOT_FOUND',\n      requestId: options?.requestId,\n    });\n    this.name = 'NotFoundError';\n    this.resourceType = options?.resourceType;\n    this.resourceId = options?.resourceId;\n  }\n}\n\n/**\n * Rate limit exceeded error\n */\nexport class RateLimitError extends PassageError {\n  /** When the rate limit resets (Unix timestamp) */\n  readonly retryAfter?: number;\n\n  constructor(\n    message: string = 'Rate limit exceeded',\n    retryAfter?: number,\n    requestId?: string\n  ) {\n    super(message, {\n      statusCode: 429,\n      errorCode: 'RATE_LIMIT_EXCEEDED',\n      requestId,\n    });\n    this.name = 'RateLimitError';\n    this.retryAfter = retryAfter;\n  }\n}\n\n/**\n * Conflict error (e.g., duplicate resource, invalid state transition)\n */\nexport class ConflictError extends PassageError {\n  constructor(message: string, requestId?: string) {\n    super(message, {\n      statusCode: 409,\n      errorCode: 'CONFLICT',\n      requestId,\n    });\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * Network or connection error\n */\nexport class NetworkError extends PassageError {\n  constructor(message: string = 'Network error', cause?: Error) {\n    super(message, {\n      errorCode: 'NETWORK_ERROR',\n      cause,\n    });\n    this.name = 'NetworkError';\n  }\n}\n\n/**\n * Request timeout error\n */\nexport class TimeoutError extends PassageError {\n  constructor(message: string = 'Request timed out', cause?: Error) {\n    super(message, {\n      errorCode: 'TIMEOUT',\n      cause,\n    });\n    this.name = 'TimeoutError';\n  }\n}\n\n/**\n * Create appropriate error from API response\n *\n * API returns errors in this format:\n * {\n *   error: 'NOT_FOUND' | 'VALIDATION_ERROR' | etc,\n *   message: 'Human readable message',\n *   status: 404,\n *   requestId: 'req_...',\n *   details?: [{field: 'fieldName', message: 'error'}]  // For validation errors\n * }\n */\nexport function createErrorFromResponse(\n  statusCode: number,\n  body: {\n    error?: string;\n    message?: string;\n    code?: string;\n    status?: number;\n    requestId?: string;\n    // API format: array of {field, message}\n    details?: Array<{ field: string; message: string }>;\n    // Legacy SDK format: Record<string, string[]>\n    fields?: Record<string, string[]>;\n  }\n): PassageError {\n  const message = body.message || body.error || 'Unknown error';\n  const requestId = body.requestId;\n  // API uses 'error' field for error code, SDK used 'code'\n  const errorCode = body.error || body.code;\n\n  switch (statusCode) {\n    case 400:\n      // Handle validation errors - convert API format to SDK format\n      if (body.details && Array.isArray(body.details)) {\n        // Convert [{field, message}] to {field: [message]}\n        const fields: Record<string, string[]> = {};\n        for (const detail of body.details) {\n          if (!fields[detail.field]) {\n            fields[detail.field] = [];\n          }\n          fields[detail.field].push(detail.message);\n        }\n        return new ValidationError(message, fields, { requestId });\n      }\n      // Legacy format support\n      if (body.fields) {\n        return new ValidationError(message, body.fields, { requestId });\n      }\n      // Create ValidationError when error code indicates it, even without details\n      if (errorCode === 'VALIDATION_ERROR') {\n        return new ValidationError(message, undefined, { requestId });\n      }\n      return new PassageError(message, {\n        statusCode: 400,\n        errorCode: errorCode || 'BAD_REQUEST',\n        requestId,\n      });\n\n    case 401:\n      return new AuthenticationError(message, requestId);\n\n    case 403:\n      return new AuthorizationError(message, requestId);\n\n    case 404:\n      return new NotFoundError(message, { requestId });\n\n    case 409:\n      return new ConflictError(message, requestId);\n\n    case 429:\n      return new RateLimitError(message, undefined, requestId);\n\n    default:\n      return new PassageError(message, {\n        statusCode,\n        errorCode: errorCode || `HTTP_${statusCode}`,\n        requestId,\n        details: body,\n      });\n  }\n}\n","import type { AxiosResponse } from 'axios';\nimport type { ResolvedConfig } from '../config';\nimport type { Pagination } from '../types';\nimport {\n  PassageError,\n  NetworkError,\n  TimeoutError,\n  createErrorFromResponse,\n} from '../errors';\n\n/**\n * Standard API response envelope structure\n * All SDK-generated response types follow this pattern: { success: boolean, data: T }\n */\ninterface ApiEnvelope<T> {\n  success: boolean;\n  data: T;\n  error?: string;\n  message?: string;\n  code?: string;\n  requestId?: string;\n}\n\n/**\n * Type helper to extract the data type from a response envelope\n * E.g., ExtractData<ApplicationResponse> = ApplicationResponseData\n */\ntype ExtractData<T> = T extends { data: infer D } ? D : never;\n\n/**\n * Unwrap a standard API response, extracting the data property.\n *\n * The generated SDK response types already include the envelope structure,\n * so this function extracts response.data.data with full type safety.\n *\n * @example\n * // response is AxiosResponse<ApplicationResponse>\n * // ApplicationResponse = { success: boolean, data: ApplicationResponseData }\n * const data = unwrapResponse(response);\n * // data is ApplicationResponseData\n */\nexport function unwrapResponse<TResponse extends { success: boolean; data: unknown }>(\n  response: AxiosResponse<TResponse>\n): ExtractData<TResponse> {\n  const envelope = response.data;\n\n  if (!envelope.success) {\n    const errorEnvelope = envelope as ApiEnvelope<unknown>;\n    throw new PassageError(errorEnvelope.message || errorEnvelope.error || 'Request failed', {\n      errorCode: errorEnvelope.code,\n      requestId: errorEnvelope.requestId,\n    });\n  }\n\n  return envelope.data as ExtractData<TResponse>;\n}\n\n/**\n * Unwrap a paginated API response\n *\n * Pagination is nested inside data per OpenAPI spec:\n * { success: true, data: { items: [...], pagination: {...} } }\n */\nexport function unwrapPaginatedResponse<TResponse extends { success: boolean; data: unknown }>(\n  response: AxiosResponse<TResponse>\n): { data: ExtractData<TResponse>; pagination?: Pagination } {\n  const envelope = response.data;\n\n  if (!envelope.success) {\n    const errorEnvelope = envelope as ApiEnvelope<unknown>;\n    throw new PassageError(errorEnvelope.message || errorEnvelope.error || 'Request failed', {\n      errorCode: errorEnvelope.code,\n      requestId: errorEnvelope.requestId,\n    });\n  }\n\n  // Pagination is inside data per OpenAPI spec\n  const data = envelope.data as ExtractData<TResponse> & { pagination?: Pagination };\n\n  return {\n    data: data,\n    pagination: data.pagination,\n  };\n}\n\n/**\n * Base class for all resource clients\n */\nexport abstract class BaseResource {\n  protected config: ResolvedConfig;\n\n  constructor(config: ResolvedConfig) {\n    this.config = config;\n  }\n\n  /**\n   * Execute an API call with retry logic and error handling\n   */\n  protected async execute<T>(\n    operation: () => Promise<T>,\n    operationName: string\n  ): Promise<T> {\n    let lastError: Error | undefined;\n    const maxRetries = this.config.maxRetries;\n\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error as Error;\n\n        // Convert axios errors to PassageErrors\n        const passageError = this.convertError(error, operationName);\n\n        // Don't retry client errors (4xx except 429)\n        if (passageError.isClientError && passageError.statusCode !== 429) {\n          throw passageError;\n        }\n\n        // Don't retry on last attempt\n        if (attempt === maxRetries) {\n          throw passageError;\n        }\n\n        // Log retry in debug mode\n        if (this.config.debug) {\n          console.log(\n            `[Passage] ${operationName} failed (attempt ${attempt + 1}/${maxRetries + 1}), retrying...`,\n            passageError.message\n          );\n        }\n\n        // Exponential backoff: 100ms, 200ms, 400ms, ...\n        const delay = Math.min(100 * Math.pow(2, attempt), 10000);\n        await this.sleep(delay);\n      }\n    }\n\n    // Should never reach here, but TypeScript needs this\n    throw lastError || new PassageError('Unknown error');\n  }\n\n  /**\n   * Convert various error types to PassageError\n   */\n  private convertError(error: unknown, operationName: string): PassageError {\n    // Already a PassageError\n    if (error instanceof PassageError) {\n      return error;\n    }\n\n    // Axios error with response\n    if (this.isAxiosError(error)) {\n      if (error.response) {\n        const { status, data } = error.response;\n        return createErrorFromResponse(status, data || {});\n      }\n\n      // Network error (no response)\n      if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\n        return new TimeoutError(`${operationName} timed out`, error as Error);\n      }\n\n      return new NetworkError(`${operationName} failed: ${error.message}`, error as Error);\n    }\n\n    // Generic error\n    if (error instanceof Error) {\n      return new PassageError(`${operationName} failed: ${error.message}`, {\n        cause: error,\n      });\n    }\n\n    // Unknown error type\n    return new PassageError(`${operationName} failed with unknown error`);\n  }\n\n  /**\n   * Type guard for axios errors\n   */\n  private isAxiosError(error: unknown): error is {\n    response?: { status: number; data: unknown };\n    code?: string;\n    message?: string;\n  } {\n    return (\n      typeof error === 'object' &&\n      error !== null &&\n      ('response' in error || 'code' in error || 'isAxiosError' in error)\n    );\n  }\n\n  /**\n   * Sleep for a specified duration\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Log debug message if debug mode is enabled\n   */\n  protected debug(message: string, ...args: unknown[]): void {\n    if (this.config.debug) {\n      console.log(`[Passage] ${message}`, ...args);\n    }\n  }\n}\n","import type { ApplicationsApi, ApplicationListItem, ApplicationStatus } from '@portola/passage';\nimport type {\n  ApplicationResponse,\n  ApplicationSubmitResponse,\n  ApplicationSubmitResponseData,\n  ApplicationListResponse,\n  DraftSubmitResponse,\n  ApplicationStatusUpdateResponse,\n  ApplicationStatusUpdateResponseData,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport type {\n  Application,\n  ApplicationListParams,\n  ApplicationCreateParams,\n  Pagination,\n} from '../types';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Resource for managing loan applications\n */\nexport class ApplicationsResource extends BaseResource {\n  private api: ApplicationsApi;\n\n  constructor(api: ApplicationsApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * List applications with optional filtering\n   *\n   * Note: Returns ApplicationListItem[], which is a lighter type than Application.\n   * Use get(id) to fetch the full Application details if needed.\n   *\n   * @example\n   * ```typescript\n   * // List all applications\n   * const { applications, pagination } = await passage.applications.list();\n   *\n   * // Filter by status\n   * const { applications } = await passage.applications.list({\n   *   status: 'OFFERS_READY',\n   *   limit: 20,\n   * });\n   *\n   * // Get full details for a specific application\n   * const fullApp = await passage.applications.get(applications[0].id);\n   * ```\n   */\n  async list(params?: ApplicationListParams): Promise<{\n    applications: ApplicationListItem[];\n    pagination: Pagination;\n  }> {\n    return this.execute(async () => {\n      this.debug('applications.list', params);\n\n      const response = await this.api.listApplications({\n        limit: params?.limit,\n        // Note: API uses page-based pagination (page parameter), not offset\n        // offset is converted to page for compatibility\n        page: params?.offset ? Math.floor(params.offset / (params?.limit ?? 20)) + 1 : undefined,\n        status: params?.status,\n        productType: params?.productType,\n        externalId: params?.externalId,\n        borrowerWalletAddress: params?.borrowerWalletAddress,\n      });\n\n      // Response is AxiosResponse<ListApplications200Response>\n      // ListApplications200Response = { success: boolean, data: { applications: ApplicationListItem[] } }\n      // Pagination is inside data per OpenAPI spec (if present)\n      const data = unwrapResponse(response) as typeof response.data.data & { pagination?: Pagination };\n\n      return {\n        applications: data.applications,\n        pagination: data.pagination ?? {\n          total: data.applications.length,\n          limit: params?.limit ?? 20,\n          offset: params?.offset ?? 0,\n          hasMore: false,\n        },\n      };\n    }, 'applications.list');\n  }\n\n  /**\n   * Get a single application by ID\n   *\n   * @example\n   * ```typescript\n   * const application = await passage.applications.get('app_123');\n   * console.log(application.status); // 'OFFERS_READY'\n   * ```\n   */\n  async get(applicationId: string): Promise<Application> {\n    return this.execute(async () => {\n      this.debug('applications.get', applicationId);\n\n      const response = await this.api.getApplication({ applicationId });\n      // Response is AxiosResponse<ApplicationResponse>\n      // ApplicationResponse = { success: boolean, data: ApplicationResponseData }\n      return unwrapResponse(response);\n    }, 'applications.get');\n  }\n\n  /**\n   * Create a new loan application\n   *\n   * @example\n   * ```typescript\n   * import { encryptPIIForLenders } from '@portola/passage-neobank/crypto';\n   *\n   * // Get available lenders\n   * const lenders = await passage.lenders.list({ productType: 'personal', stateCode: 'CA' });\n   *\n   * // Encrypt PII for each lender\n   * const encryptedPayloads = encryptPIIForLenders(\n   *   lenders.map(l => ({ lenderId: l.lenderId, publicKey: l.publicKey })),\n   *   borrowerPII\n   * );\n   *\n   * // Create application\n   * const application = await passage.applications.create({\n   *   productType: 'personal',\n   *   encryptedPayloads,\n   *   metadata: { requestedAmount: 10000 },\n   * });\n   * ```\n   */\n  async create(params: ApplicationCreateParams): Promise<ApplicationSubmitResponseData> {\n    return this.execute(async () => {\n      this.debug('applications.create', { productType: params.productType, externalId: params.externalId });\n\n      const response = await this.api.submitApplication({\n        applicationRequest: {\n          productType: params.productType,\n          encryptedPayloads: params.encryptedPayloads,\n          externalId: params.externalId,\n          metadata: params.metadata,\n          draft: params.draft,\n          walletId: params.walletId,\n          borrowerWalletAddress: params.borrowerWalletAddress,\n          borrowerWalletChain: params.borrowerWalletChain,\n          kycAttestation: params.kycAttestation,\n          kycDocumentHandle: params.kycDocumentHandle,\n        },\n      });\n\n      // Response is AxiosResponse<ApplicationSubmitResponse>\n      // ApplicationSubmitResponse = { success: boolean, data: ApplicationSubmitResponseData }\n      return unwrapResponse(response);\n    }, 'applications.create');\n  }\n\n  /**\n   * Submit a draft application\n   *\n   * @example\n   * ```typescript\n   * const submitted = await passage.applications.submitDraft(draftApp.id, {\n   *   perLenderKycHandles: [\n   *     { lenderId: 'lender_1', handle: 'sdx_handle_1' },\n   *   ],\n   * });\n   * ```\n   */\n  async submitDraft(\n    applicationId: string,\n    params?: {\n      perLenderKycHandles?: Array<{ lenderId: string; handle: string }>;\n    }\n  ): Promise<ApplicationSubmitResponseData> {\n    return this.execute(async () => {\n      this.debug('applications.submitDraft', applicationId);\n\n      const response = await this.api.submitDraftApplication({\n        applicationId,\n        applicationSubmitRequest: {\n          perLenderKycHandles: params?.perLenderKycHandles,\n        },\n      });\n\n      // Response is AxiosResponse<DraftSubmitResponse>\n      return unwrapResponse(response);\n    }, 'applications.submitDraft');\n  }\n\n  /**\n   * Update an application's status\n   *\n   * Note: Not all status transitions are valid. The API will return an error\n   * for invalid transitions (e.g., cannot move from FUNDED back to PENDING).\n   *\n   * @example\n   * ```typescript\n   * // Cancel an application\n   * const updated = await passage.applications.updateStatus('app_123', 'CANCELLED');\n   * console.log(updated.status); // 'CANCELLED'\n   * ```\n   */\n  async updateStatus(\n    applicationId: string,\n    status: ApplicationStatus\n  ): Promise<ApplicationStatusUpdateResponseData> {\n    return this.execute(async () => {\n      this.debug('applications.updateStatus', { applicationId, status });\n\n      const response = await this.api.updateApplicationStatus({\n        applicationId,\n        applicationStatusUpdateRequest: { status },\n      });\n\n      // Response is AxiosResponse<ApplicationStatusUpdateResponse>\n      return unwrapResponse(response);\n    }, 'applications.updateStatus');\n  }\n\n  /**\n   * Cancel an application\n   *\n   * Convenience method that calls updateStatus with 'CANCELLED'.\n   * This is typically used when a borrower abandons the application flow.\n   *\n   * @example\n   * ```typescript\n   * // User clicked \"Cancel Application\"\n   * const cancelled = await passage.applications.cancel('app_123');\n   * console.log(cancelled.status); // 'CANCELLED'\n   * ```\n   */\n  async cancel(applicationId: string): Promise<ApplicationStatusUpdateResponseData> {\n    return this.updateStatus(applicationId, 'CANCELLED');\n  }\n\n  /**\n   * Get the loan associated with an application\n   *\n   * Returns the loan that was created when this application was funded.\n   * Returns null if the application hasn't been funded yet.\n   *\n   * @example\n   * ```typescript\n   * // Check if application has a loan\n   * const loan = await passage.applications.getLoan('app_123');\n   * if (loan) {\n   *   console.log(`Loan ${loan.id} - Principal: $${loan.principal}`);\n   * } else {\n   *   console.log('Application not yet funded');\n   * }\n   * ```\n   */\n  async getLoan(applicationId: string): Promise<import('@portola/passage').Loan | null> {\n    return this.execute(async () => {\n      this.debug('applications.getLoan', applicationId);\n\n      try {\n        const response = await this.api.getLoanByApplication({ applicationId });\n        return unwrapResponse(response);\n      } catch (error: any) {\n        // Return null for 404 (no loan yet) instead of throwing\n        if (error?.response?.status === 404) {\n          return null;\n        }\n        throw error;\n      }\n    }, 'applications.getLoan');\n  }\n}\n","import type { OffersApi, FinalOfferAcceptanceResponseData } from '@portola/passage';\nimport type {\n  EncryptedOffersResponse,\n  OfferAcceptanceResponse,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport type {\n  OffersResponse,\n  PrequalAcceptParams,\n  FinalOfferAcceptParams,\n  OfferAcceptanceResponseData,\n} from '../types';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Resource for managing loan offers\n */\nexport class OffersResource extends BaseResource {\n  private api: OffersApi;\n\n  constructor(api: OffersApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * Get prequalified offers for an application\n   *\n   * @example\n   * ```typescript\n   * import { decryptOfferDetails } from '@portola/passage-neobank/crypto';\n   *\n   * const offers = await passage.offers.getPrequalified(applicationId);\n   *\n   * for (const lenderGroup of offers.lenders) {\n   *   for (const offer of lenderGroup.offers) {\n   *     const { data, verified } = decryptOfferDetails(\n   *       offer.encryptedOfferDetailsNeobank,\n   *       offer.checksumSha256,\n   *       process.env.NEOBANK_PRIVATE_KEY!\n   *     );\n   *\n   *     if (verified) {\n   *       console.log(`${lenderGroup.lenderName}: ${data.apr} APR`);\n   *     }\n   *   }\n   * }\n   * ```\n   */\n  async getPrequalified(applicationId: string): Promise<OffersResponse> {\n    return this.execute(async () => {\n      this.debug('offers.getPrequalified', applicationId);\n\n      const response = await this.api.getPrequalOffers({ applicationId });\n      // Response is AxiosResponse<EncryptedOffersResponse>\n      // EncryptedOffersResponse = { success: boolean, data: EncryptedOffersResponseData }\n      return unwrapResponse(response);\n    }, 'offers.getPrequalified');\n  }\n\n  /**\n   * Accept a prequalified offer to proceed to final underwriting\n   *\n   * Requires hard pull consent from the borrower. This triggers the lender\n   * to perform a hard credit pull and submit final offers.\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.offers.acceptPrequal(offerId, {\n   *   hardPullConsent: {\n   *     consented: true,\n   *     consentedAt: new Date().toISOString(),\n   *     ipAddress: req.ip,\n   *     userAgent: req.headers['user-agent'],\n   *   },\n   *   // Optional: provide wallet for disbursement if not set at application creation\n   *   borrowerWallet: {\n   *     address: '0x1234...',\n   *     chain: 'base',\n   *   },\n   * });\n   * // Application moves to final underwriting\n   * ```\n   */\n  async acceptPrequal(\n    offerId: string,\n    params: PrequalAcceptParams\n  ): Promise<OfferAcceptanceResponseData> {\n    return this.execute(async () => {\n      this.debug('offers.acceptPrequal', offerId);\n\n      const response = await this.api.acceptPrequalOffer({\n        offerId,\n        offerAcceptanceRequest: {\n          hardPullConsent: params.hardPullConsent,\n          communicationPreferences: params.communicationPreferences,\n          borrowerWallet: params.borrowerWallet,\n          borrowerEmail: params.borrowerEmail,\n          borrowerName: params.borrowerName,\n          requestedDisbursement: params.requestedDisbursement,\n        },\n      });\n\n      // Response is AxiosResponse<OfferAcceptanceResponse>\n      return unwrapResponse(response);\n    }, 'offers.acceptPrequal');\n  }\n\n  /**\n   * Get final offers for an application (after accepting prequal)\n   *\n   * @example\n   * ```typescript\n   * const finalOffers = await passage.offers.getFinal(applicationId);\n   * ```\n   */\n  async getFinal(applicationId: string): Promise<OffersResponse> {\n    return this.execute(async () => {\n      this.debug('offers.getFinal', applicationId);\n\n      const response = await this.api.getFinalOffers({ applicationId });\n      // Response is AxiosResponse<EncryptedOffersResponse>\n      return unwrapResponse(response);\n    }, 'offers.getFinal');\n  }\n\n  /**\n   * Accept a final offer to proceed to signing\n   *\n   * This is the point of no return - the borrower commits to the loan terms.\n   * Returns signing session details including the URL to redirect the borrower.\n   *\n   * All parameters are optional. You can provide wallet, consent, and\n   * communication preferences here even if already provided at prequal\n   * acceptance, allowing for updates or late additions.\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.offers.acceptFinal(offerId, {\n   *   borrowerEmail: 'borrower@example.com',\n   *   borrowerName: 'John Doe',\n   *   // Optionally update wallet or provide if not set earlier\n   *   borrowerWallet: {\n   *     address: '0x1234...',\n   *     chain: 'base',\n   *   },\n   * });\n   *\n   * // Redirect borrower to sign documents\n   * if (result.signingUrl) {\n   *   console.log('Sign at:', result.signingUrl);\n   * }\n   * ```\n   */\n  async acceptFinal(\n    offerId: string,\n    params: FinalOfferAcceptParams = {}\n  ): Promise<FinalOfferAcceptanceResponseData> {\n    return this.execute(async () => {\n      this.debug('offers.acceptFinal', offerId);\n\n      const response = await this.api.acceptFinalOffer({\n        offerId,\n        finalOfferAcceptanceRequest: {\n          borrowerEmail: params.borrowerEmail,\n          borrowerName: params.borrowerName,\n          hardPullConsent: params.hardPullConsent,\n          communicationPreferences: params.communicationPreferences,\n          borrowerWallet: params.borrowerWallet,\n          requestedDisbursement: params.requestedDisbursement,\n        },\n      });\n\n      // Response is AxiosResponse<FinalOfferAcceptanceResponse>\n      return unwrapResponse(response);\n    }, 'offers.acceptFinal');\n  }\n}\n","import type { LoansApi, ApplicationsApi, LoanStatus, RepaymentStatus } from '@portola/passage';\nimport type {\n  LoanResponse,\n  PaymentScheduleResponse,\n  Loan,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport type { PaymentScheduleItem, LoanListParams, Pagination, Repayment } from '../types';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Resource for managing loans\n *\n * Supports listing loans (with filters), getting loan details, and viewing repayments.\n */\nexport class LoansResource extends BaseResource {\n  private api: LoansApi;\n  private applicationsApi: ApplicationsApi;\n\n  constructor(api: LoansApi, applicationsApi: ApplicationsApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n    this.applicationsApi = applicationsApi;\n  }\n\n  /**\n   * List loans with optional filtering\n   *\n   * @example\n   * ```typescript\n   * // List all loans\n   * const { loans, pagination } = await passage.loans.list();\n   *\n   * // Filter by external user ID\n   * const { loans } = await passage.loans.list({ externalId: 'user_123' });\n   *\n   * // Filter by borrower wallet\n   * const { loans } = await passage.loans.list({ borrowerAddress: '0x...' });\n   *\n   * // Filter by status\n   * const { loans } = await passage.loans.list({ status: 'active' });\n   * ```\n   */\n  async list(params?: LoanListParams): Promise<{\n    loans: Loan[];\n    pagination: Pagination;\n  }> {\n    return this.execute(async () => {\n      this.debug('loans.list', params);\n\n      const response = await this.api.listLoans({\n        status: params?.status as LoanStatus,\n        externalId: params?.externalId,\n        borrowerAddress: params?.borrowerAddress,\n        limit: params?.limit,\n        offset: params?.offset,\n      });\n\n      // Pagination is inside data per OpenAPI spec\n      const data = unwrapResponse(response);\n\n      return {\n        loans: data.loans,\n        pagination: data.pagination ?? {\n          total: data.loans.length,\n          limit: params?.limit ?? 50,\n          offset: params?.offset ?? 0,\n          hasMore: false,\n        },\n      };\n    }, 'loans.list');\n  }\n\n  /**\n   * List repayments for a loan\n   *\n   * @example\n   * ```typescript\n   * const { repayments, pagination } = await passage.loans.getRepayments('loan_123');\n   *\n   * for (const repayment of repayments) {\n   *   console.log(`Received ${repayment.amount} on ${repayment.receivedAt}`);\n   * }\n   * ```\n   */\n  async getRepayments(\n    loanId: string,\n    params?: { limit?: number; offset?: number; status?: RepaymentStatus }\n  ): Promise<{ repayments: Repayment[]; pagination: Pagination }> {\n    return this.execute(async () => {\n      this.debug('loans.getRepayments', { loanId, ...params });\n\n      const response = await this.api.listLoanRepayments({\n        loanId,\n        limit: params?.limit,\n        offset: params?.offset,\n        status: params?.status,\n      });\n\n      // Pagination is inside data per OpenAPI spec\n      const data = unwrapResponse(response) as typeof response.data.data & { pagination?: Pagination };\n\n      return {\n        repayments: data.repayments as Repayment[],\n        pagination: data.pagination ?? {\n          total: data.repayments.length,\n          limit: params?.limit ?? 50,\n          offset: params?.offset ?? 0,\n          hasMore: false,\n        },\n      };\n    }, 'loans.getRepayments');\n  }\n\n  /**\n   * Get a single loan by ID\n   *\n   * @example\n   * ```typescript\n   * const loan = await passage.loans.get('loan_123');\n   * console.log(`Outstanding: ${loan.outstandingBalance}`);\n   * ```\n   */\n  async get(loanId: string): Promise<Loan> {\n    return this.execute(async () => {\n      this.debug('loans.get', loanId);\n\n      const response = await this.api.getLoan({ loanId });\n      // Response is AxiosResponse<LoanResponse>\n      // LoanResponse = { success: boolean, data: Loan }\n      return unwrapResponse(response);\n    }, 'loans.get');\n  }\n\n  /**\n   * Get the payment schedule for a loan\n   *\n   * @example\n   * ```typescript\n   * const schedule = await passage.loans.getPaymentSchedule('loan_123');\n   *\n   * for (const payment of schedule) {\n   *   console.log(`Payment ${payment.paymentNumber}: ${payment.payment} due ${payment.dueDate}`);\n   * }\n   * ```\n   */\n  async getPaymentSchedule(loanId: string): Promise<PaymentScheduleItem[]> {\n    return this.execute(async () => {\n      this.debug('loans.getPaymentSchedule', loanId);\n\n      const response = await this.api.getPaymentSchedule({ loanId });\n      // Response is AxiosResponse<PaymentScheduleResponse>\n      // PaymentScheduleResponse = { success: boolean, data: PaymentScheduleResponseData }\n      const data = unwrapResponse(response);\n\n      return data.projectedSchedule;\n    }, 'loans.getPaymentSchedule');\n  }\n\n  /**\n   * Get loan by application ID\n   *\n   * Convenience method for neobanks to look up a loan using the application ID.\n   * Returns null if the application hasn't been funded yet (no loan exists).\n   *\n   * @example\n   * ```typescript\n   * // Get loan for an application\n   * const loan = await passage.loans.getByApplication('app_123');\n   * if (loan) {\n   *   console.log(`Loan status: ${loan.status}`);\n   * }\n   * ```\n   *\n   * @see applications.getLoan() - Equivalent method on the applications resource\n   */\n  async getByApplication(applicationId: string): Promise<Loan | null> {\n    return this.execute(async () => {\n      this.debug('loans.getByApplication', applicationId);\n\n      try {\n        const response = await this.applicationsApi.getLoanByApplication({ applicationId });\n        return unwrapResponse(response);\n      } catch (error: any) {\n        // Return null for 404 (no loan yet) instead of throwing\n        if (error?.response?.status === 404) {\n          return null;\n        }\n        throw error;\n      }\n    }, 'loans.getByApplication');\n  }\n}\n","import type { EntityDiscoveryApi } from '@portola/passage';\nimport type { LenderListResponse } from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport type { Lender, LenderListParams } from '../types';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Resource for discovering available lenders\n */\nexport class LendersResource extends BaseResource {\n  private api: EntityDiscoveryApi;\n\n  constructor(api: EntityDiscoveryApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * List available lenders with optional filtering\n   *\n   * Returns lenders that support the specified product type and state.\n   * Each lender includes their public key needed for PII encryption.\n   *\n   * @example\n   * ```typescript\n   * // Get lenders for personal loans in California\n   * const lenders = await passage.lenders.list({\n   *   productType: 'personal',\n   *   stateCode: 'CA',\n   * });\n   *\n   * // Use lender public keys for encryption\n   * for (const lender of lenders) {\n   *   console.log(`${lender.name}: supports ${lender.supportedProducts.join(', ')}`);\n   * }\n   * ```\n   */\n  async list(params?: LenderListParams): Promise<Lender[]> {\n    return this.execute(async () => {\n      this.debug('lenders.list', params);\n\n      const response = await this.api.listLenders({\n        productType: params?.productType,\n        stateCode: params?.stateCode,\n      });\n\n      // Response is AxiosResponse<LenderListResponse>\n      // LenderListResponse = { success: boolean, data: { lenders: LenderListItem[], total: number, ... } }\n      const data = unwrapResponse(response);\n      return data.lenders;\n    }, 'lenders.list');\n  }\n}\n","import type { NeobankSelfServiceApi, AccountStatsData } from '@portola/passage';\nimport type {\n  NeobankAccountResponse,\n  WebhookConfigResponse,\n  WebhookUrlUpdateResponse,\n  WebhookTestResponse,\n  WebhookTestData,\n  WebhookSecretRotateResponse,\n  WebhookSecretRotateData,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport type {\n  AccountInfo,\n  WebhookConfig,\n} from '../types';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Resource for neobank self-service operations\n */\nexport class AccountResource extends BaseResource {\n  private api: NeobankSelfServiceApi;\n\n  constructor(api: NeobankSelfServiceApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * Get current neobank account information\n   *\n   * @example\n   * ```typescript\n   * const info = await passage.account.getInfo();\n   * console.log(info.name); // 'My Neobank'\n   * console.log(info.environment); // 'sandbox' or 'production'\n   * ```\n   */\n  async getInfo(): Promise<AccountInfo> {\n    return this.execute(async () => {\n      this.debug('account.getInfo');\n\n      const response = await this.api.getAccountInfo();\n      // Response is AxiosResponse<NeobankAccountResponse>\n      // NeobankAccountResponse = { success: boolean, data: NeobankAccountResponseData }\n      return unwrapResponse(response);\n    }, 'account.getInfo');\n  }\n\n  /**\n   * Get aggregated statistics for your neobank account\n   *\n   * Returns application counts by status, loan statistics, and borrower counts.\n   *\n   * @example\n   * ```typescript\n   * const stats = await passage.account.getStats();\n   * console.log(`Total applications: ${stats.applications.total}`);\n   * console.log(`Active loans: ${stats.loans.active}`);\n   * console.log(`Total disbursed: ${stats.loans.totalDisbursed}`);\n   * console.log(`Unique borrowers: ${stats.borrowers.total}`);\n   * ```\n   */\n  async getStats(): Promise<AccountStatsData> {\n    return this.execute(async () => {\n      this.debug('account.getStats');\n\n      const response = await this.api.getAccountStats();\n      // Response is AxiosResponse<AccountStatsResponse>\n      return unwrapResponse(response);\n    }, 'account.getStats');\n  }\n\n  /**\n   * Get webhook configuration\n   *\n   * @example\n   * ```typescript\n   * const webhook = await passage.account.getWebhook();\n   * if (webhook.webhookUrl) {\n   *   console.log(`Webhook configured: ${webhook.webhookUrl}`);\n   * }\n   * ```\n   */\n  async getWebhook(): Promise<WebhookConfig> {\n    return this.execute(async () => {\n      this.debug('account.getWebhook');\n\n      const response = await this.api.getWebhookConfig();\n      // Response is AxiosResponse<WebhookConfigResponse>\n      return unwrapResponse(response);\n    }, 'account.getWebhook');\n  }\n\n  /**\n   * Update webhook URL\n   *\n   * URL must be HTTPS in production. HTTP is allowed in sandbox for testing.\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.account.updateWebhook({\n   *   url: 'https://api.myapp.com/webhooks/passage',\n   * });\n   * console.log(result.message); // 'Webhook URL updated successfully'\n   * ```\n   */\n  async updateWebhook(params: { url: string }): Promise<{\n    webhookUrl: string | null | undefined;\n    message: string;\n  }> {\n    return this.execute(async () => {\n      this.debug('account.updateWebhook', params.url);\n\n      const response = await this.api.updateWebhookUrl({\n        webhookUrlUpdateRequest: { webhookUrl: params.url },\n      });\n\n      // Response is AxiosResponse<WebhookUrlUpdateResponse>\n      const data = unwrapResponse(response);\n      return {\n        webhookUrl: data.webhookUrl,\n        message: data.message,\n      };\n    }, 'account.updateWebhook');\n  }\n\n  /**\n   * Send a test webhook to verify endpoint configuration\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.account.testWebhook();\n   * if (result.delivered) {\n   *   console.log('Webhook test successful');\n   * } else {\n   *   console.log(`Test failed: ${result.error}`);\n   * }\n   * ```\n   */\n  async testWebhook(): Promise<WebhookTestData> {\n    return this.execute(async () => {\n      this.debug('account.testWebhook');\n\n      const response = await this.api.testWebhook();\n      // Response is AxiosResponse<WebhookTestResponse>\n      return unwrapResponse(response);\n    }, 'account.testWebhook');\n  }\n\n  /**\n   * Rotate webhook secret\n   *\n   * IMPORTANT: The new secret is only returned once. Store it securely.\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.account.rotateWebhookSecret();\n   * // Store this securely - it won't be shown again!\n   * await saveToSecretManager(result.webhookSecret);\n   * ```\n   */\n  async rotateWebhookSecret(): Promise<WebhookSecretRotateData> {\n    return this.execute(async () => {\n      this.debug('account.rotateWebhookSecret');\n\n      const response = await this.api.rotateWebhookSecret();\n      // Response is AxiosResponse<WebhookSecretRotateResponse>\n      return unwrapResponse(response);\n    }, 'account.rotateWebhookSecret');\n  }\n}\n","import type { SigningApi } from '@portola/passage';\nimport type {\n  SigningSessionCreateResponse,\n  SigningSessionStatusResponse,\n  SigningSessionsListResponse,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport { BaseResource, unwrapResponse } from './base';\n\n/**\n * Signing session data returned from the API\n */\nexport interface SigningSession {\n  sessionId: string;\n  applicationId: string;\n  lenderId?: string;\n  status: SigningSessionStatus;\n  signingUrl?: string;\n  initiatedAt?: string;\n  expiresAt?: string;\n  borrowerEmail?: string;\n  borrowerName?: string;\n  completedAt?: string | null;\n  documentHandle?: string | null;\n}\n\n/**\n * Signing session status enum\n * References SDK type which matches Prisma SigningStatus and OpenAPI status enum\n */\nexport type SigningSessionStatus =\n  import('@portola/passage').SigningSessionStatus;\n\n/**\n * Parameters for creating a signing session\n */\nexport interface SigningSessionCreateParams {\n  borrowerEmail: string;\n  borrowerName: string;\n}\n\n/**\n * Resource for managing document signing sessions\n */\nexport class SigningResource extends BaseResource {\n  private api: SigningApi;\n\n  constructor(api: SigningApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * Create a new signing session for an application\n   *\n   * After accepting a final offer, create a signing session to allow\n   * the borrower to sign loan documents electronically.\n   *\n   * @example\n   * ```typescript\n   * const session = await passage.signing.create('app_123', {\n   *   borrowerEmail: 'borrower@example.com',\n   *   borrowerName: 'John Doe',\n   * });\n   *\n   * // Redirect borrower to sign documents\n   * console.log('Sign here:', session.signingUrl);\n   * ```\n   */\n  async create(\n    applicationId: string,\n    params: SigningSessionCreateParams\n  ): Promise<SigningSession> {\n    return this.execute(async () => {\n      this.debug('signing.create', applicationId);\n\n      const response = await this.api.createSigningSession({\n        applicationId,\n        createSigningSessionRequest: {\n          borrowerEmail: params.borrowerEmail,\n          borrowerName: params.borrowerName,\n        },\n      });\n\n      // Response is AxiosResponse<SigningSessionCreateResponse>\n      const data = unwrapResponse(response);\n\n      return {\n        sessionId: data.sessionId,\n        applicationId: data.applicationId,\n        status: data.status as SigningSessionStatus,\n        signingUrl: data.signingUrl,\n        expiresAt: data.expiresAt,\n      };\n    }, 'signing.create');\n  }\n\n  /**\n   * Get the status of a signing session\n   *\n   * @example\n   * ```typescript\n   * const session = await passage.signing.getStatus('session_abc123');\n   *\n   * if (session.status === 'COMPLETED') {\n   *   console.log('Documents signed at:', session.completedAt);\n   *   // Document handle available for download\n   *   console.log('Document handle:', session.documentHandle);\n   * }\n   * ```\n   */\n  async getStatus(sessionId: string): Promise<SigningSession> {\n    return this.execute(async () => {\n      this.debug('signing.getStatus', sessionId);\n\n      const response = await this.api.getSigningSessionStatus({ sessionId });\n      // Response is AxiosResponse<SigningSessionStatusResponse>\n      const data = unwrapResponse(response);\n\n      return {\n        sessionId: data.sessionId,\n        applicationId: data.applicationId,\n        status: data.status as SigningSessionStatus,\n        borrowerEmail: data.borrowerEmail,\n        borrowerName: data.borrowerName,\n        completedAt: data.completedAt,\n        documentHandle: data.signedDocHandle,\n      };\n    }, 'signing.getStatus');\n  }\n\n  /**\n   * List all signing sessions for an application\n   *\n   * @example\n   * ```typescript\n   * const sessions = await passage.signing.list('app_123');\n   *\n   * for (const session of sessions) {\n   *   console.log(`Session ${session.sessionId}: ${session.status}`);\n   * }\n   * ```\n   */\n  async list(applicationId: string): Promise<SigningSession[]> {\n    return this.execute(async () => {\n      this.debug('signing.list', applicationId);\n\n      const response = await this.api.getSigningSessionsByApplication({ applicationId });\n      // Response is AxiosResponse<SigningSessionsListResponse>\n      const data = unwrapResponse(response);\n\n      return data.sessions.map((session) => ({\n        sessionId: session.sessionId,\n        applicationId: session.applicationId,\n        lenderId: session.lenderId,\n        status: session.status as SigningSessionStatus,\n        borrowerEmail: session.borrowerEmail,\n        borrowerName: session.borrowerName,\n        initiatedAt: session.initiatedAt,\n        expiresAt: session.expiresAt,\n        completedAt: session.completedAt,\n        documentHandle: session.signedDocHandle,\n      }));\n    }, 'signing.list');\n  }\n}\n","import type { SDXApi } from '@portola/passage';\nimport type { SDXTokenResponse } from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport { BaseResource, unwrapResponse } from './base';\nimport axios from 'axios';\n\n/**\n * SDX upload token returned from the API\n */\nexport interface SDXUploadToken {\n  /** JWT token for SDX API access */\n  sdxToken: string;\n  /** Token expiration in seconds (typically 600 = 10 minutes) */\n  expiresIn: number;\n  /** Base URL of the SDX service for document operations */\n  sdxUrl: string;\n}\n\n/**\n * Result of uploading a document to SDX\n *\n * Note: Field names match the SDX service response (documentHandle, expiresAt, blobSize)\n * rather than using different names to avoid confusion.\n */\nexport interface SDXUploadResult {\n  /** Unique document handle for retrieval (96 hex characters) */\n  documentHandle: string;\n  /** ISO 8601 timestamp when document handle expires */\n  expiresAt: string;\n  /** Size of uploaded blob in bytes */\n  blobSize?: number;\n  /** True if an identical blob was previously uploaded (deduplication) */\n  duplicate?: boolean;\n}\n\n/**\n * Document type for SDX uploads\n * Matches SDXTokenRequestDocumentTypeEnum from the generated SDK\n */\nexport type SDXDocumentType = 'kyc' | 'contract' | 'signed_contract';\n\n/**\n * Parameters for getting an SDX upload token\n */\nexport interface SDXTokenParams {\n  applicationId: string;\n  action: 'upload' | 'download';\n  documentType?: SDXDocumentType;\n}\n\n/**\n * Parameters for uploading to SDX\n */\nexport interface SDXUploadParams {\n  /** The SDX token obtained from getToken() */\n  token: SDXUploadToken;\n  /** The encrypted document data */\n  encryptedDocument: Buffer | ArrayBuffer | Uint8Array;\n  /** Document type header */\n  documentType?: SDXDocumentType;\n  /** Optional idempotency key */\n  idempotencyKey?: string;\n}\n\n/**\n * Parameters for downloading from SDX\n */\nexport interface SDXDownloadParams {\n  /** The SDX token obtained from getToken() with action: 'download' */\n  token: SDXUploadToken;\n  /** The document handle to download */\n  documentHandle: string;\n}\n\n/**\n * Parameters for storing a KYC handle\n */\nexport interface StoreKYCHandleParams {\n  applicationId: string;\n  /** The SDX handle from the upload */\n  kycDocumentHandle: string;\n  /** Document type (e.g., 'drivers_license', 'passport', 'ssn_card') */\n  documentType: string;\n  /** Optional metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Resource for managing SDX (Secure Document Exchange) operations\n *\n * SDX is used for secure, encrypted document storage and transfer.\n * Documents are encrypted client-side before upload.\n */\nexport class SDXResource extends BaseResource {\n  private sdxApi: SDXApi;\n\n  constructor(sdxApi: SDXApi, config: ResolvedConfig) {\n    super(config);\n    this.sdxApi = sdxApi;\n  }\n\n  /**\n   * Get an SDX access token for document operations\n   *\n   * Tokens are short-lived (10 minutes) and should be used immediately.\n   *\n   * @example\n   * ```typescript\n   * const token = await passage.sdx.getToken({\n   *   applicationId: 'app_123',\n   *   action: 'upload',\n   *   documentType: 'kyc',\n   * });\n   *\n   * console.log('SDX URL:', token.sdxUrl);\n   * console.log('Expires in:', token.expiresIn, 'seconds');\n   * ```\n   */\n  async getToken(params: SDXTokenParams): Promise<SDXUploadToken> {\n    return this.execute(async () => {\n      this.debug('sdx.getToken', params);\n\n      const response = await this.sdxApi.generateSDXToken({\n        sDXTokenRequest: {\n          applicationId: params.applicationId,\n          action: params.action,\n          documentType: params.documentType,\n        },\n      });\n\n      // Response is AxiosResponse<SDXTokenResponse>\n      const data = unwrapResponse(response);\n\n      return {\n        sdxToken: data.sdxToken,\n        expiresIn: data.expiresIn,\n        sdxUrl: data.sdxUrl,\n      };\n    }, 'sdx.getToken');\n  }\n\n  /**\n   * Upload an encrypted document to SDX\n   *\n   * The document should be encrypted using `encryptDocumentForSDX()` from the crypto module.\n   *\n   * @example\n   * ```typescript\n   * import { encryptDocumentForSDX } from '@portola/passage-neobank/crypto';\n   * import fs from 'fs';\n   *\n   * // Read and encrypt the document\n   * const document = fs.readFileSync('./drivers_license.pdf');\n   * const encryptedDoc = encryptDocumentForSDX(document, lenderPublicKey);\n   *\n   * // Get upload token\n   * const token = await passage.sdx.getToken({\n   *   applicationId: 'app_123',\n   *   action: 'upload',\n   *   documentType: 'kyc',\n   * });\n   *\n   * // Upload encrypted document\n   * const result = await passage.sdx.upload({\n   *   token,\n   *   encryptedDocument: encryptedDoc,\n   *   documentType: 'kyc',\n   * });\n   *\n   * console.log('Document handle:', result.documentHandle);\n   * ```\n   */\n  async upload(params: SDXUploadParams): Promise<SDXUploadResult> {\n    return this.execute(async () => {\n      this.debug('sdx.upload', { documentType: params.documentType });\n\n      // Convert to Buffer/Uint8Array if needed\n      const documentBuffer =\n        params.encryptedDocument instanceof Buffer\n          ? params.encryptedDocument\n          : params.encryptedDocument instanceof Uint8Array\n            ? params.encryptedDocument\n            : new Uint8Array(params.encryptedDocument);\n\n      // Upload directly to SDX service using the token\n      // Note: We use axios directly here because SDX is a separate service\n      // with a dynamic base URL (obtained from the token response)\n      const response = await axios.post<{\n        documentHandle: string;\n        expiresAt: string;\n        blobSize?: number;\n        duplicate?: boolean;\n      }>(\n        `${params.token.sdxUrl}/sdx/blobs`,\n        documentBuffer,\n        {\n          headers: {\n            Authorization: `Bearer ${params.token.sdxToken}`,\n            'Content-Type': 'application/octet-stream',\n            'Content-Length': documentBuffer.length.toString(),\n            'X-Document-Type': params.documentType ?? 'other',\n            ...(params.idempotencyKey && {\n              'Idempotency-Key': params.idempotencyKey,\n            }),\n          },\n          timeout: this.config.timeout,\n        }\n      );\n\n      return {\n        documentHandle: response.data.documentHandle,\n        expiresAt: response.data.expiresAt,\n        blobSize: response.data.blobSize,\n        duplicate: response.data.duplicate,\n      };\n    }, 'sdx.upload');\n  }\n\n  /**\n   * Convenience method: Get token and upload in one call\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.sdx.uploadDocument({\n   *   applicationId: 'app_123',\n   *   documentType: 'kyc',\n   *   encryptedDocument: encryptedDoc,\n   * });\n   *\n   * console.log('Document handle:', result.documentHandle);\n   * ```\n   */\n  async uploadDocument(params: {\n    applicationId: string;\n    documentType?: SDXDocumentType;\n    encryptedDocument: Buffer | ArrayBuffer | Uint8Array;\n    idempotencyKey?: string;\n  }): Promise<SDXUploadResult> {\n    // Get upload token\n    const token = await this.getToken({\n      applicationId: params.applicationId,\n      action: 'upload',\n      documentType: params.documentType,\n    });\n\n    // Upload document\n    return this.upload({\n      token,\n      encryptedDocument: params.encryptedDocument,\n      documentType: params.documentType,\n      idempotencyKey: params.idempotencyKey,\n    });\n  }\n\n  /**\n   * Download an encrypted document from SDX\n   *\n   * @example\n   * ```typescript\n   * const token = await passage.sdx.getToken({\n   *   applicationId: 'app_123',\n   *   action: 'download',\n   * });\n   *\n   * const encryptedDoc = await passage.sdx.download({\n   *   token,\n   *   documentHandle: 'sdx_tok_abc123...',\n   * });\n   * ```\n   */\n  async download(params: SDXDownloadParams): Promise<Buffer> {\n    return this.execute(async () => {\n      this.debug('sdx.download', params.documentHandle);\n\n      const response = await axios.get<ArrayBuffer>(\n        `${params.token.sdxUrl}/sdx/blobs/${params.documentHandle}`,\n        {\n          headers: {\n            Authorization: `Bearer ${params.token.sdxToken}`,\n          },\n          responseType: 'arraybuffer',\n          timeout: this.config.timeout,\n        }\n      );\n\n      return Buffer.from(response.data);\n    }, 'sdx.download');\n  }\n\n  /**\n   * Convenience method: Get token and download in one call\n   *\n   * @example\n   * ```typescript\n   * const encryptedDoc = await passage.sdx.downloadDocument({\n   *   applicationId: 'app_123',\n   *   documentHandle: 'sdx_tok_abc123...',\n   * });\n   *\n   * // Decrypt with your private key\n   * const plaintext = decryptDocument(encryptedDoc, privateKey);\n   * ```\n   */\n  async downloadDocument(params: {\n    applicationId: string;\n    documentHandle: string;\n  }): Promise<Buffer> {\n    const token = await this.getToken({\n      applicationId: params.applicationId,\n      action: 'download',\n    });\n\n    return this.download({\n      token,\n      documentHandle: params.documentHandle,\n    });\n  }\n\n  /**\n   * Store a KYC document handle for an application\n   *\n   * After uploading a KYC document to SDX, store the handle so it can be\n   * associated with the application and accessed by lenders.\n   *\n   * @example\n   * ```typescript\n   * // Upload KYC document\n   * const uploadResult = await passage.sdx.uploadDocument({\n   *   applicationId: 'app_123',\n   *   documentType: 'kyc',\n   *   encryptedDocument: encryptedDoc,\n   * });\n   *\n   * // Store the handle\n   * await passage.sdx.storeKYCHandle({\n   *   applicationId: 'app_123',\n   *   kycDocumentHandle: uploadResult.documentHandle,\n   *   documentType: 'drivers_license',\n   * });\n   * ```\n   */\n  async storeKYCHandle(params: StoreKYCHandleParams): Promise<{\n    applicationId: string;\n    kycDocumentHandle: string;\n    kycSubmittedAt?: string;\n  }> {\n    return this.execute(async () => {\n      this.debug('sdx.storeKYCHandle', params.applicationId);\n\n      const response = await this.sdxApi.storeKYCHandle({\n        kYCHandleRequest: {\n          applicationId: params.applicationId,\n          kycDocumentHandle: params.kycDocumentHandle,\n          documentType: params.documentType,\n          metadata: params.metadata,\n        },\n      });\n\n      // Response is AxiosResponse<KYCHandleResponse>\n      const data = unwrapResponse(response);\n\n      return {\n        applicationId: data.applicationId,\n        kycDocumentHandle: data.kycDocumentHandle,\n        // Normalize null to undefined to match return type contract (?: string)\n        kycSubmittedAt: data.kycSubmittedAt ?? undefined,\n      };\n    }, 'sdx.storeKYCHandle');\n  }\n}\n","import type { WalletsApi } from '@portola/passage';\nimport type {\n  WalletResponseData,\n  WalletType,\n  WalletVerificationMethod,\n  WalletVerificationStatus,\n  Chain,\n  WalletChain,\n} from '@portola/passage';\nimport type { ResolvedConfig } from '../config';\nimport { BaseResource, unwrapResponse } from './base';\n\n// Re-export types for convenience\nexport type { WalletVerificationMethod, WalletVerificationStatus, Chain, WalletChain };\n// Note: WalletType is also exported but users can import from @portola/passage directly\n\n/**\n * Wallet data returned from the API\n */\nexport interface Wallet {\n  id: string;\n  address: string;\n  chain: Chain;\n  type: WalletType;\n  verified: boolean;\n  verifiedByThisNeobank: boolean;\n  verifiedAt: string | null;\n  verificationMethod: WalletVerificationMethod | null;\n  externalId: string | null;\n  label: string | null;\n  createdAt: string;\n}\n\n/**\n * Parameters for creating/registering a wallet\n */\nexport interface CreateWalletParams {\n  address: string;\n  /** Blockchain chain for the wallet (e.g., 'base', 'ethereum', 'polygon') */\n  chain?: WalletChain;\n  type?: WalletType;\n  externalId?: string;\n  label?: string;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Parameters for updating wallet metadata\n */\nexport interface UpdateWalletParams {\n  externalId?: string;\n  label?: string;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Parameters for listing wallets\n */\nexport interface ListWalletsParams {\n  verified?: boolean;\n  chain?: Chain;\n  externalId?: string;\n  address?: string;\n  limit?: number;\n  offset?: number;\n}\n\n/**\n * MESSAGE_SIGN challenge structure\n */\nexport interface MessageSignChallenge {\n  message: string;\n  nonce: string;\n  signingStandard: 'personal_sign' | 'eth_signTypedData_v4';\n  typedData?: Record<string, unknown>;\n}\n\n/**\n * AOPP challenge structure\n */\nexport interface AOPPChallenge {\n  callback: string;\n  message: string;\n  asset: string;\n  format?: string;\n  aoppUri: string;\n}\n\n/**\n * Verification challenge data\n */\nexport interface VerificationChallenge {\n  verificationId: string;\n  walletId: string;\n  method: WalletVerificationMethod;\n  status: WalletVerificationStatus;\n  challenge: MessageSignChallenge | AOPPChallenge;\n  expiresAt: string;\n}\n\n/**\n * Type guard to check if challenge is AOPP\n */\nexport function isAOPPChallenge(\n  challenge: MessageSignChallenge | AOPPChallenge\n): challenge is AOPPChallenge {\n  return 'aoppUri' in challenge;\n}\n\n/**\n * Type guard to check if challenge is MESSAGE_SIGN\n */\nexport function isMessageSignChallenge(\n  challenge: MessageSignChallenge | AOPPChallenge\n): challenge is MessageSignChallenge {\n  return 'nonce' in challenge && 'signingStandard' in challenge;\n}\n\n/**\n * Verification status data\n */\nexport interface Verification {\n  id: string;\n  walletId: string;\n  method: WalletVerificationMethod;\n  status: WalletVerificationStatus;\n  expiresAt: string | null;\n  completedAt: string | null;\n  failedAt: string | null;\n  failureReason: string | null;\n}\n\n/**\n * Verification list item\n */\nexport interface VerificationSummary {\n  id: string;\n  method: WalletVerificationMethod;\n  status: WalletVerificationStatus;\n  initiatedAt: string;\n  completedAt: string | null;\n  expiresAt: string;\n}\n\n/**\n * Result of submitting verification proof\n */\nexport interface VerificationResult {\n  verificationId: string;\n  status: WalletVerificationStatus;\n  verifiedAt: string | null;\n  wallet: {\n    id: string;\n    verified: boolean;\n    verificationMethod: WalletVerificationMethod | null;\n  };\n}\n\n/**\n * Resource for wallet ownership verification\n *\n * @example\n * ```typescript\n * // Register a wallet\n * const wallet = await passage.wallets.create({\n *   address: '0x1234...',\n *   chain: 'base',\n * });\n *\n * // Initiate verification\n * const challenge = await passage.wallets.initiateVerification(wallet.id, {\n *   method: 'MESSAGE_SIGN',\n * });\n *\n * // User signs the message with their wallet\n * const signature = await userWallet.signMessage(challenge.challenge.message);\n *\n * // Submit the proof\n * const result = await passage.wallets.submitProof(challenge.verificationId, {\n *   signature,\n * });\n *\n * console.log(result.status); // 'VERIFIED'\n * ```\n */\nexport class WalletsResource extends BaseResource {\n  private api: WalletsApi;\n\n  constructor(api: WalletsApi, config: ResolvedConfig) {\n    super(config);\n    this.api = api;\n  }\n\n  /**\n   * Create or link a wallet\n   *\n   * Registers a wallet address for ownership verification.\n   * Idempotent - returns existing wallet if address+chain already exists.\n   *\n   * @example\n   * ```typescript\n   * const wallet = await passage.wallets.create({\n   *   address: '0x1234567890abcdef...',\n   *   chain: 'base',\n   *   externalId: 'user_123', // Your internal user ID\n   *   label: \"John's wallet\",\n   * });\n   * ```\n   */\n  async create(params: CreateWalletParams): Promise<Wallet> {\n    return this.execute(async () => {\n      this.debug('wallets.create', params.address);\n\n      const response = await this.api.createWallet({\n        createWalletRequest: {\n          address: params.address,\n          chain: params.chain,\n          type: params.type,\n          externalId: params.externalId,\n          label: params.label,\n          metadata: params.metadata,\n        },\n      });\n\n      const data = unwrapResponse(response);\n      return this.mapWallet(data);\n    }, 'wallets.create');\n  }\n\n  /**\n   * Get a wallet by ID\n   *\n   * @example\n   * ```typescript\n   * const wallet = await passage.wallets.get('wal_123');\n   * console.log(wallet.verified, wallet.verifiedByThisNeobank);\n   * ```\n   */\n  async get(walletId: string): Promise<Wallet> {\n    return this.execute(async () => {\n      this.debug('wallets.get', walletId);\n\n      const response = await this.api.getWallet({ walletId });\n      const data = unwrapResponse(response);\n      return this.mapWallet(data);\n    }, 'wallets.get');\n  }\n\n  /**\n   * List wallets linked to this neobank\n   *\n   * @example\n   * ```typescript\n   * // List all verified wallets\n   * const { wallets } = await passage.wallets.list({ verified: true });\n   *\n   * // Find wallets by external ID\n   * const { wallets } = await passage.wallets.list({ externalId: 'user_123' });\n   * ```\n   */\n  async list(params: ListWalletsParams = {}): Promise<{\n    wallets: Wallet[];\n    pagination: { total: number; limit: number; offset: number };\n  }> {\n    return this.execute(async () => {\n      this.debug('wallets.list', params);\n\n      // API expects 'true' | 'false' string instead of boolean for verified filter\n      const verifiedParam = params.verified === undefined\n        ? undefined\n        : params.verified\n          ? ('true' as const)\n          : ('false' as const);\n\n      const response = await this.api.listWallets({\n        verified: verifiedParam,\n        chain: params.chain as 'base' | 'ethereum' | 'polygon' | 'arbitrum' | 'optimism' | 'solana' | undefined,\n        externalId: params.externalId,\n        address: params.address,\n        limit: params.limit,\n        offset: params.offset,\n      });\n\n      const data = unwrapResponse(response);\n      return {\n        wallets: data.wallets.map((w: WalletResponseData) => this.mapWallet(w)),\n        pagination: data.pagination,\n      };\n    }, 'wallets.list');\n  }\n\n  /**\n   * Update wallet metadata\n   *\n   * Updates neobank-specific metadata (externalId, label, metadata).\n   *\n   * @example\n   * ```typescript\n   * await passage.wallets.update('wal_123', {\n   *   label: 'Primary wallet',\n   *   externalId: 'new_user_id',\n   * });\n   * ```\n   */\n  async update(walletId: string, params: UpdateWalletParams): Promise<Wallet> {\n    return this.execute(async () => {\n      this.debug('wallets.update', walletId);\n\n      const response = await this.api.updateWallet({\n        walletId,\n        updateWalletRequest: {\n          externalId: params.externalId,\n          label: params.label,\n          metadata: params.metadata,\n        },\n      });\n\n      const data = unwrapResponse(response);\n      return this.mapWallet(data);\n    }, 'wallets.update');\n  }\n\n  /**\n   * Initiate wallet verification\n   *\n   * Starts the verification process. For MESSAGE_SIGN, returns a message\n   * that the user must sign with their wallet.\n   *\n   * @example\n   * ```typescript\n   * const challenge = await passage.wallets.initiateVerification('wal_123', {\n   *   method: 'MESSAGE_SIGN',\n   * });\n   *\n   * // Present message to user for signing\n   * console.log(challenge.challenge.message);\n   * ```\n   */\n  async initiateVerification(\n    walletId: string,\n    params: { method: WalletVerificationMethod }\n  ): Promise<VerificationChallenge> {\n    return this.execute(async () => {\n      this.debug('wallets.initiateVerification', walletId, params.method);\n\n      const response = await this.api.initiateVerification({\n        walletId,\n        initiateVerificationRequest: { method: params.method },\n      });\n\n      const data = unwrapResponse(response);\n      return {\n        verificationId: data.verificationId,\n        walletId: data.walletId,\n        method: data.method as WalletVerificationMethod,\n        status: data.status as WalletVerificationStatus,\n        challenge: data.challenge,\n        expiresAt: data.expiresAt,\n      };\n    }, 'wallets.initiateVerification');\n  }\n\n  /**\n   * Submit verification proof\n   *\n   * Submits the signature to complete verification.\n   *\n   * @example\n   * ```typescript\n   * // After user signs the challenge message\n   * const result = await passage.wallets.submitProof(verificationId, {\n   *   signature: '0x...',\n   * });\n   *\n   * if (result.status === 'VERIFIED') {\n   *   console.log('Wallet verified!');\n   * }\n   * ```\n   */\n  async submitProof(\n    verificationId: string,\n    params: { signature: string }\n  ): Promise<VerificationResult> {\n    return this.execute(async () => {\n      this.debug('wallets.submitProof', verificationId);\n\n      const response = await this.api.submitVerificationProof({\n        verificationId,\n        submitProofRequest: { signature: params.signature },\n      });\n\n      const data = unwrapResponse(response);\n      return {\n        verificationId: data.verificationId,\n        status: data.status,\n        verifiedAt: data.verifiedAt,\n        wallet: {\n          id: data.wallet.id,\n          verified: data.wallet.verified,\n          verificationMethod: data.wallet.verificationMethod,\n        },\n      };\n    }, 'wallets.submitProof');\n  }\n\n  /**\n   * Get verification status\n   *\n   * @example\n   * ```typescript\n   * const verification = await passage.wallets.getVerification('ver_123');\n   * console.log(verification.status);\n   * ```\n   */\n  async getVerification(verificationId: string): Promise<Verification> {\n    return this.execute(async () => {\n      this.debug('wallets.getVerification', verificationId);\n\n      const response = await this.api.getVerificationStatus({ verificationId });\n      const data = unwrapResponse(response);\n\n      return {\n        id: data.id,\n        walletId: data.walletId,\n        method: data.method as WalletVerificationMethod,\n        status: data.status as WalletVerificationStatus,\n        expiresAt: data.expiresAt ?? null,\n        completedAt: data.completedAt,\n        failedAt: data.failedAt,\n        failureReason: data.failureReason,\n      };\n    }, 'wallets.getVerification');\n  }\n\n  /**\n   * List verifications for a wallet\n   *\n   * Returns all verification attempts for this wallet by this neobank.\n   *\n   * @example\n   * ```typescript\n   * const { verifications } = await passage.wallets.listVerifications('wal_123');\n   * ```\n   */\n  async listVerifications(walletId: string): Promise<{\n    verifications: VerificationSummary[];\n  }> {\n    return this.execute(async () => {\n      this.debug('wallets.listVerifications', walletId);\n\n      const response = await this.api.listWalletVerifications({ walletId });\n      const data = unwrapResponse(response);\n\n      return {\n        verifications: data.verifications.map((v) => ({\n          id: v.id,\n          method: v.method as WalletVerificationMethod,\n          status: v.status as WalletVerificationStatus,\n          initiatedAt: v.initiatedAt,\n          completedAt: v.completedAt ?? null,\n          expiresAt: v.expiresAt,\n        })),\n      };\n    }, 'wallets.listVerifications');\n  }\n\n  // =========================================================================\n  // Convenience Methods\n  // =========================================================================\n\n  /**\n   * Ensure a wallet is registered and check verification status\n   *\n   * This is a convenience method that:\n   * 1. Creates/links the wallet if it doesn't exist\n   * 2. Checks if already verified by this neobank\n   * 3. Returns verification status and challenge if needed\n   *\n   * Use this when you want to check if a wallet needs verification\n   * before showing the signing UI to the user.\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.wallets.ensureVerified({\n   *   address: userWalletAddress,\n   *   chain: 'base',\n   *   externalId: user.id,\n   * });\n   *\n   * if (result.verified) {\n   *   // Wallet already verified, proceed with application\n   *   console.log('Wallet verified:', result.wallet.id);\n   * } else {\n   *   // Need user to sign - show signing UI\n   *   const signature = await walletClient.signMessage({\n   *     message: result.challenge.challenge.message,\n   *   });\n   *\n   *   await passage.wallets.submitProof(result.challenge.verificationId, { signature });\n   * }\n   * ```\n   */\n  async ensureVerified(params: CreateWalletParams): Promise<\n    | { verified: true; wallet: Wallet; challenge: null }\n    | { verified: false; wallet: Wallet; challenge: VerificationChallenge }\n  > {\n    return this.execute(async () => {\n      this.debug('wallets.ensureVerified', params.address);\n\n      // 1. Create or get existing wallet\n      const wallet = await this.create(params);\n\n      // 2. If already verified by this neobank, return immediately\n      if (wallet.verifiedByThisNeobank) {\n        return { verified: true, wallet, challenge: null };\n      }\n\n      // 3. Not verified - initiate verification and return challenge\n      const challenge = await this.initiateVerification(wallet.id, {\n        method: 'MESSAGE_SIGN',\n      });\n\n      return { verified: false, wallet, challenge };\n    }, 'wallets.ensureVerified');\n  }\n\n  /**\n   * Register wallet and complete verification in a single atomic operation\n   *\n   * This method creates a NEW challenge internally and verifies the signature\n   * against that challenge. It is designed for server-controlled signing\n   * scenarios (custodial wallets, automated systems) where you can sign the\n   * challenge message in the same execution context.\n   *\n   * **WARNING:** Do NOT use this after calling `ensureVerified()` or\n   * `initiateVerification()`. Each call creates a new challenge with a unique\n   * nonce, so signatures from previous challenges will fail verification.\n   *\n   * For browser-based user wallet verification, use the two-step flow:\n   * 1. Call `ensureVerified()` to get the challenge\n   * 2. User signs the challenge message in their wallet\n   * 3. Call `submitProof(challenge.verificationId, { signature })`\n   *\n   * @example\n   * ```typescript\n   * // For custodial/server-controlled wallets only\n   * const result = await passage.wallets.verifyWithSignature({\n   *   address: custodialWalletAddress,\n   *   chain: 'base',\n   *   signature: await custodialSigner.signMessage(challengeMessage),\n   * });\n   *\n   * console.log(result.wallet.verified); // true\n   * ```\n   *\n   * @example\n   * ```typescript\n   * // For browser-based user wallets, use ensureVerified + submitProof instead:\n   * const result = await passage.wallets.ensureVerified({ address: '0x...' });\n   * if (!result.verified) {\n   *   const signature = await userWallet.signMessage(result.challenge.challenge.message);\n   *   await passage.wallets.submitProof(result.challenge.verificationId, { signature });\n   * }\n   * ```\n   */\n  async verifyWithSignature(\n    params: CreateWalletParams & { signature: string }\n  ): Promise<VerificationResult & { wallet: Wallet }> {\n    return this.execute(async () => {\n      this.debug('wallets.verifyWithSignature', params.address);\n\n      const { signature, ...walletParams } = params;\n\n      // 1. Create or get existing wallet\n      const wallet = await this.create(walletParams);\n\n      // 2. If already verified, return current state\n      if (wallet.verifiedByThisNeobank) {\n        return {\n          verificationId: '', // No new verification created\n          status: 'VERIFIED' as const,\n          verifiedAt: wallet.verifiedAt,\n          wallet,\n        };\n      }\n\n      // 3. Initiate verification\n      const challenge = await this.initiateVerification(wallet.id, {\n        method: 'MESSAGE_SIGN',\n      });\n\n      // 4. Submit proof\n      const result = await this.submitProof(challenge.verificationId, { signature });\n\n      // 5. Return result with updated wallet\n      const updatedWallet = await this.get(wallet.id);\n\n      return {\n        ...result,\n        wallet: updatedWallet,\n      };\n    }, 'wallets.verifyWithSignature');\n  }\n\n  // =========================================================================\n  // AOPP Methods\n  // =========================================================================\n\n  /**\n   * Initiate AOPP verification\n   *\n   * Returns a challenge with an aoppUri that can be displayed as a QR code.\n   * The user scans this with an AOPP-compatible wallet (Ledger Live, BitBox),\n   * and the wallet POSTs the signature directly to our callback URL.\n   *\n   * After displaying the QR code, poll with `waitForAOPPVerification()` to\n   * detect when the user completes verification.\n   *\n   * @example\n   * ```typescript\n   * import { isAOPPChallenge } from '@portola/passage-neobank';\n   *\n   * const challenge = await passage.wallets.initiateAOPPVerification('wal_123');\n   *\n   * if (isAOPPChallenge(challenge.challenge)) {\n   *   // Display QR code with challenge.challenge.aoppUri\n   *   showQRCode(challenge.challenge.aoppUri);\n   *\n   *   // Poll for completion (user signs in their wallet app)\n   *   const result = await passage.wallets.waitForAOPPVerification(\n   *     challenge.verificationId,\n   *     { timeout: 600000 } // 10 minutes\n   *   );\n   *\n   *   if (result.status === 'VERIFIED') {\n   *     console.log('Wallet verified via AOPP!');\n   *   }\n   * }\n   * ```\n   */\n  async initiateAOPPVerification(walletId: string): Promise<VerificationChallenge> {\n    return this.execute(async () => {\n      this.debug('wallets.initiateAOPPVerification', walletId);\n\n      const response = await this.api.initiateVerification({\n        walletId,\n        initiateVerificationRequest: { method: 'AOPP' },\n      });\n\n      const data = unwrapResponse(response);\n      return {\n        verificationId: data.verificationId,\n        walletId: data.walletId,\n        method: data.method as WalletVerificationMethod,\n        status: data.status as WalletVerificationStatus,\n        challenge: data.challenge,\n        expiresAt: data.expiresAt,\n      };\n    }, 'wallets.initiateAOPPVerification');\n  }\n\n  /**\n   * Poll for AOPP verification completion\n   *\n   * Since AOPP callbacks go directly to the server (not through the frontend),\n   * this method polls the verification status until it completes, fails, or times out.\n   *\n   * @param verificationId - The verification ID from initiateAOPPVerification\n   * @param options - Polling options\n   * @param options.timeout - Max time to wait in ms (default: 600000 = 10 minutes)\n   * @param options.interval - Poll interval in ms (default: 2000 = 2 seconds)\n   * @param options.onPoll - Optional callback on each poll (for showing countdown)\n   *\n   * @example\n   * ```typescript\n   * const result = await passage.wallets.waitForAOPPVerification(verificationId, {\n   *   timeout: 600000, // 10 minutes\n   *   interval: 2000,  // Check every 2 seconds\n   *   onPoll: (verification) => {\n   *     console.log(`Status: ${verification.status}, expires: ${verification.expiresAt}`);\n   *   },\n   * });\n   * ```\n   */\n  async waitForAOPPVerification(\n    verificationId: string,\n    options: {\n      timeout?: number;\n      interval?: number;\n      onPoll?: (verification: Verification) => void;\n    } = {}\n  ): Promise<Verification> {\n    const { timeout = 600000, interval = 2000, onPoll } = options;\n    const startTime = Date.now();\n\n    return this.execute(async () => {\n      this.debug('wallets.waitForAOPPVerification', verificationId);\n\n      while (Date.now() - startTime < timeout) {\n        const verification = await this.getVerification(verificationId);\n\n        if (onPoll) {\n          onPoll(verification);\n        }\n\n        // Terminal states - return immediately\n        if (\n          verification.status === 'VERIFIED' ||\n          verification.status === 'FAILED' ||\n          verification.status === 'EXPIRED'\n        ) {\n          return verification;\n        }\n\n        // Still pending - wait and poll again\n        await new Promise((resolve) => setTimeout(resolve, interval));\n      }\n\n      // Timeout - fetch final status\n      return this.getVerification(verificationId);\n    }, 'wallets.waitForAOPPVerification');\n  }\n\n  /**\n   * Map API wallet data to Wallet type\n   */\n  private mapWallet(data: {\n    id: string;\n    address: string;\n    chain: Chain;\n    type: WalletType;\n    verified: boolean;\n    verifiedByThisNeobank: boolean;\n    verifiedAt?: string | null;\n    verificationMethod?: WalletVerificationMethod | null;\n    externalId?: string | null;\n    label?: string | null;\n    createdAt: string;\n  }): Wallet {\n    return {\n      id: data.id,\n      address: data.address,\n      chain: data.chain,\n      type: data.type,\n      verified: data.verified,\n      verifiedByThisNeobank: data.verifiedByThisNeobank,\n      verifiedAt: data.verifiedAt ?? null,\n      verificationMethod: data.verificationMethod ?? null,\n      externalId: data.externalId ?? null,\n      label: data.label ?? null,\n      createdAt: data.createdAt,\n    };\n  }\n}\n","import {\n  Configuration,\n  ApplicationsApi,\n  OffersApi,\n  LoansApi,\n  EntityDiscoveryApi,\n  NeobankSelfServiceApi,\n  SigningApi,\n  SDXApi,\n  WalletsApi,\n} from '@portola/passage';\n\nimport type { PassageClientConfig } from './config';\nimport { version } from '../package.json';\nimport { resolveConfig, type ResolvedConfig } from './config';\nimport { ApplicationsResource } from './resources/applications';\nimport { OffersResource } from './resources/offers';\nimport { LoansResource } from './resources/loans';\nimport { LendersResource } from './resources/lenders';\nimport { AccountResource } from './resources/account';\nimport { SigningResource } from './resources/signing';\nimport { SDXResource } from './resources/sdx';\nimport { WalletsResource } from './resources/wallets';\n\n/**\n * Main Passage SDK client\n *\n * @example\n * ```typescript\n * import { Passage } from '@portola/passage-neobank';\n *\n * const passage = new Passage({\n *   apiKey: process.env.NEOBANK_API_KEY!,\n *   environment: 'sandbox', // or 'production'\n * });\n *\n * // List applications\n * const { applications } = await passage.applications.list();\n *\n * // Get offers\n * const offers = await passage.offers.getPrequalified(applicationId);\n *\n * // Accept an offer\n * await passage.offers.acceptFinal(offerId, {\n *   borrowerWalletAddress: '0x...',\n * });\n * ```\n */\nexport class Passage {\n  private readonly config: ResolvedConfig;\n  private readonly sdkConfig: Configuration;\n\n  /** Applications resource - create, list, and manage loan applications */\n  public readonly applications: ApplicationsResource;\n\n  /** Offers resource - view and accept loan offers */\n  public readonly offers: OffersResource;\n\n  /** Loans resource - view and manage funded loans */\n  public readonly loans: LoansResource;\n\n  /** Lenders resource - discover available lenders and their public keys */\n  public readonly lenders: LendersResource;\n\n  /** Account resource - manage neobank settings (webhooks, etc.) */\n  public readonly account: AccountResource;\n\n  /** Signing resource - manage document signing sessions */\n  public readonly signing: SigningResource;\n\n  /** SDX resource - secure document exchange (upload/download encrypted documents) */\n  public readonly sdx: SDXResource;\n\n  /** Wallets resource - wallet ownership verification */\n  public readonly wallets: WalletsResource;\n\n  constructor(config: PassageClientConfig) {\n    if (!config.apiKey) {\n      throw new Error('Passage: apiKey is required');\n    }\n\n    // Validate API key format\n    if (\n      !config.apiKey.startsWith('nb_test_') &&\n      !config.apiKey.startsWith('nb_live_')\n    ) {\n      throw new Error(\n        'Passage: apiKey must start with \"nb_test_\" (sandbox) or \"nb_live_\" (production)'\n      );\n    }\n\n    // Auto-detect environment from API key if not specified\n    const environment =\n      config.environment ??\n      (config.apiKey.startsWith('nb_test_') ? 'sandbox' : 'production');\n\n    this.config = resolveConfig({ ...config, environment });\n\n    // Initialize underlying SDK configuration\n    this.sdkConfig = new Configuration({\n      basePath: this.config.baseUrl,\n      apiKey: this.config.apiKey,\n      baseOptions: {\n        timeout: this.config.timeout,\n        headers: {\n          'User-Agent': `passage-neobank/${version}`,\n        },\n      },\n    });\n\n    // Initialize API clients\n    const applicationsApi = new ApplicationsApi(this.sdkConfig);\n    const offersApi = new OffersApi(this.sdkConfig);\n    const loansApi = new LoansApi(this.sdkConfig);\n    const entityDiscoveryApi = new EntityDiscoveryApi(this.sdkConfig);\n    const selfServiceApi = new NeobankSelfServiceApi(this.sdkConfig);\n    const signingApi = new SigningApi(this.sdkConfig);\n    const sdxApi = new SDXApi(this.sdkConfig);\n    const walletsApi = new WalletsApi(this.sdkConfig);\n\n    // Initialize resource clients\n    this.applications = new ApplicationsResource(applicationsApi, this.config);\n    this.offers = new OffersResource(offersApi, this.config);\n    this.loans = new LoansResource(loansApi, applicationsApi, this.config);\n    this.lenders = new LendersResource(entityDiscoveryApi, this.config);\n    this.account = new AccountResource(selfServiceApi, this.config);\n    this.signing = new SigningResource(signingApi, this.config);\n    this.sdx = new SDXResource(sdxApi, this.config);\n    this.wallets = new WalletsResource(walletsApi, this.config);\n\n    if (this.config.debug) {\n      console.log('[Passage] Initialized client', {\n        environment: this.config.environment,\n        baseUrl: this.config.baseUrl,\n      });\n    }\n  }\n\n  /**\n   * Get the current configuration (read-only)\n   */\n  getConfig(): Readonly<ResolvedConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Check if connected to sandbox environment\n   */\n  get isSandbox(): boolean {\n    return this.config.environment === 'sandbox';\n  }\n\n  /**\n   * Check if connected to production environment\n   */\n  get isProduction(): boolean {\n    return this.config.environment === 'production';\n  }\n}\n\n// Default export for convenience\nexport default Passage;\n"]}